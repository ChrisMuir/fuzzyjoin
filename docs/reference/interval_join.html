<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Join two tables based on overlapping (low, high) intervals — interval_join • fuzzyjoin</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">fuzzyjoin</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/stringdist_join.html">Example of `stringdist_inner_join`: Correcting misspellings against a dictionary</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Join two tables based on overlapping (low, high) intervals</h1>
    </div>

    
    <p>Joins tables based on overlapping intervals: for example, joining
the row (1, 4) with (3, 6), but not with (5, 10). This operation is sped up
using interval trees as implemented in the IRanges package. You
can specify particular relationships between intervals (such as a maximum gap,
or a minimum overlap) through arguments passed on to
<code><a href='http://www.rdocumentation.org/packages/IRanges/topics/findOverlaps-methods'>findOverlaps</a></code>. See that documentation for descriptions
of such arguments.</p>
    

    <pre class="usage"><span class='fu'>interval_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>by</span>, <span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"inner"</span>, <span class='no'>...</span>)

<span class='fu'>interval_inner_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_left_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_right_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_full_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_semi_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>interval_anti_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A tbl</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>A tbl</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>Columns by which to join the two tables. If provided, this must be
two columns: start of interval, then end of interval</p></td>
    </tr>
    <tr>
      <th>mode</th>
      <td><p>One of "inner", "left", "right", "full" "semi", or "anti"</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments passed on to <code><a href='http://www.rdocumentation.org/packages/IRanges/topics/findOverlaps-methods'>findOverlaps</a></code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This allows joining on date or datetime intervals. It throws an
error if the type of date/datetime disagrees between the two tables.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>id1</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>start</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>5</span>, <span class='fl'>10</span>), <span class='kw'>end</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>, <span class='fl'>7</span>, <span class='fl'>15</span>))
<span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>id2</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>start</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2</span>, <span class='fl'>4</span>, <span class='fl'>16</span>), <span class='kw'>end</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>4</span>, <span class='fl'>8</span>, <span class='fl'>20</span>))

<span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   2       5     7   2       4     8</div><div class='input'>
<span class='co'># Allow them to be separated by a gap with a maximum:</span>
<span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>maxgap</span> <span class='kw'>=</span> <span class='fl'>1</span>)   <span class='co'># let 1 join with 2</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   1       1     3   2       4     8
#&gt; 3   2       5     7   1       2     4
#&gt; 4   2       5     7   2       4     8
#&gt; 5   3      10    15   2       4     8
#&gt; 6   3      10    15   3      16    20</div><div class='input'><span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>maxgap</span> <span class='kw'>=</span> <span class='fl'>20</span>)  <span class='co'># everything joins each other</span></div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   1       1     3   2       4     8
#&gt; 3   1       1     3   3      16    20
#&gt; 4   2       5     7   1       2     4
#&gt; 5   2       5     7   2       4     8
#&gt; 6   2       5     7   3      16    20
#&gt; 7   3      10    15   1       2     4
#&gt; 8   3      10    15   2       4     8
#&gt; 9   3      10    15   3      16    20</div><div class='input'>
<span class='co'># Require that they overlap by more than a particular amount</span>
<span class='fu'>interval_inner_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>, <span class='kw'>minoverlap</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   2       5     7   2       4     8</div><div class='input'><span class='fl'>70</span>-<span class='fl'>9</span></div><div class='output co'>#&gt; [1] 61</div><div class='input'><span class='co'># other types of joins:</span>
<span class='fu'>interval_full_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   2       5     7   2       4     8
#&gt; 3   3      10    15  NA      NA    NA
#&gt; 4  NA      NA    NA   3      16    20</div><div class='input'><span class='fu'>interval_left_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   2       5     7   2       4     8
#&gt; 3   3      10    15  NA      NA    NA</div><div class='input'><span class='fu'>interval_right_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start.x end.x id2 start.y end.y
#&gt; 1   1       1     3   1       2     4
#&gt; 2   2       5     7   2       4     8
#&gt; 3  NA      NA    NA   3      16    20</div><div class='input'><span class='fu'>interval_semi_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start end
#&gt; 1   1     1   3
#&gt; 2   2     5   7</div><div class='input'><span class='fu'>interval_anti_join</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)</div><div class='output co'>#&gt; <span class='message'>Joining by: c("start", "end")</span></div><div class='output co'>#&gt;   id1 start end
#&gt; 3   3    10  15</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by David Robinson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
